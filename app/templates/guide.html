<!DOCTYPE html>
<html lang="ru" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Карта-руководство - VeriRandom</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link href="/static/css/custom.css" rel="stylesheet">
    <style>
        .text-muted {
            color: #ffffff !important;
        }

        /* Стили для карты-пути */
        .journey-map {
            position: relative;
            padding: 2rem 0;
        }

        .path-line {
            position: absolute;
            left: 50px;
            top: 0;
            bottom: 0;
            width: 4px;
            background: linear-gradient(to bottom, #ffd700, #ff6b00);
            z-index: 1;
        }

        .journey-step {
            position: relative;
            margin-bottom: 3rem;
            padding-left: 100px;
            min-height: 120px;
            z-index: 2;
        }

        .step-number {
            position: absolute;
            left: 30px;
            top: 0;
            width: 40px;
            height: 40px;
            background: #ffd700;
            color: #000;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            z-index: 3;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .step-number.active {
            transform: scale(1.2);
            box-shadow: 0 0 0 5px rgba(255, 215, 0, 0.3);
        }

        .step-card {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid #ffd700;
            border-radius: 15px;
            padding: 1.5rem;
            transition: all 0.3s ease;
            cursor: pointer;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .step-card:hover {
            transform: translateX(10px);
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.3);
        }

        .step-card.active {
            background: rgba(255, 215, 0, 0.1);
            transform: translateX(10px);
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.3);
        }

        .step-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .quick-action {
            background: rgba(255, 215, 0, 0.1);
            border: 1px solid #ffd700;
            border-radius: 10px;
            padding: 0.75rem;
            margin: 0.5rem 0;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .quick-action:hover {
            background: rgba(255, 215, 0, 0.2);
            transform: scale(1.02);
        }

        .quick-action.selected {
            background: rgba(255, 215, 0, 0.3);
            border: 2px solid #ffd700;
            transform: scale(1.02);
        }

        .user-scenario {
            background: rgba(255, 215, 0, 0.05);
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
            border: 2px dashed #ffd700;
        }

        .scenario-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #ffd700;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-right: 1rem;
        }

        .visual-guide {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin: 1rem 0;
            padding: 1rem;
            background: rgba(255, 215, 0, 0.05);
            border-radius: 10px;
        }

        /* Стили для интерактивного помощника */
        .interactive-helper {
            background: rgba(255, 215, 0, 0.05);
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
            border: 2px solid #ffd700;
        }

        .helper-step {
            display: none;
        }

        .helper-step.active {
            display: block;
        }

        .option-card {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid #444;
            border-radius: 10px;
            padding: 1.5rem;
            margin: 1rem 0;
            transition: all 0.3s ease;
            cursor: pointer;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .option-card:hover {
            border-color: #ffd700;
            transform: translateY(-5px);
        }

        .option-card.selected {
            border-color: #ffd700;
            background: rgba(255, 215, 0, 0.1);
            transform: translateY(-5px);
        }

        .equal-height {
            display: flex;
            flex-wrap: wrap;
        }

        .equal-height .col-md-4,
        .equal-height .col-md-6 {
            display: flex;
        }

        .progress-tracker {
            display: flex;
            justify-content: space-between;
            margin-bottom: 2rem;
            position: relative;
        }

        .progress-tracker::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 0;
            right: 0;
            height: 4px;
            background: #444;
            z-index: 1;
        }

        .progress-tracker::after {
            content: '';
            position: absolute;
            top: 15px;
            left: 0;
            height: 4px;
            background: #ffd700;
            z-index: 2;
            transition: width 0.5s ease;
            width: var(--progress-width, 0%);
        }

        .progress-step {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #444;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            z-index: 3;
            position: relative;
        }

        .progress-step.active {
            background: #ffd700;
            color: #000;
        }

        .progress-step.completed {
            background: #ffd700;
            color: #000;
        }

        /* Стили для интерактивной подсказки */
        .floating-tooltip {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(255, 215, 0, 0.9);
            color: #000;
            padding: 1rem;
            border-radius: 10px;
            max-width: 300px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            display: none;
        }

        .tooltip-close {
            position: absolute;
            top: 5px;
            right: 10px;
            cursor: pointer;
            font-weight: bold;
        }

        /* Анимации */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
            40% {transform: translateY(-10px);}
            60% {transform: translateY(-5px);}
        }

        .bounce {
            animation: bounce 2s infinite;
        }

        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s ease;
        }

        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Стили для интерактивного результата */
        .result-visualization {
            background: rgba(255, 215, 0, 0.05);
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
            border: 2px solid #ffd700;
            display: none;
        }

        .result-visualization.active {
            display: block;
        }

        .path-visual {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 1rem 0;
        }

        .path-node {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #444;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .path-node.active {
            background: #ffd700;
            color: #000;
        }

        .path-arrow {
            font-size: 1.5rem;
            color: #ffd700;
        }

        /* Стили для выравнивания кнопок и контента */
        .step-content-wrapper {
            display: flex;
            flex-direction: column;
            height: 100%;
            flex: 1;
        }

        .step-main-content {
            flex: 1;
        }

        .step-button-container {
            margin-top: auto;
            padding-top: 1rem;
            display: flex;
            justify-content: center;
            align-items: flex-end;
        }

        .result-card {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid #ffd700;
            border-radius: 10px;
            padding: 1.5rem;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            transition: all 0.3s ease;
        }

        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(255, 215, 0, 0.2);
        }

        .completion-badge {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: rgba(255, 215, 0, 0.9);
            color: #000;
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
            z-index: 2000;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            transition: transform 0.5s ease;
        }

        .completion-badge.show {
            transform: translate(-50%, -50%) scale(1);
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1500;
            display: none;
        }

        .overlay.show {
            display: block;
        }

        /* Выравнивание кнопок в шагах */
        .step-row {
            display: flex;
            align-items: stretch;
            min-height: 200px;
        }

        .step-center-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .step-button-column {
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body class="bg-black text-white">
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark border-bottom border-warning">
        <div class="container">
            <a class="navbar-brand fw-bold text-warning fs-3 me-5" href="/">
                VeriRandom
            </a>
            
            <button class="navbar-toggler border-warning" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto align-items-center">
                    <li class="nav-item">
                        <a class="nav-link nav-glow" href="/">Главная</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link nav-glow" href="/lottery">Проведение тиража</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link nav-glow" href="/audit">Аудит генератора</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link nav-glow" href="/demo">Демонстрация</a>
                    </li>
                    <li class="nav-link nav-glow text-white">
                        Руководство
                    </li>
                    <li class="nav-item">
                        <a class="nav-link nav-glow" href="/entropy">Сбор</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="py-5 bg-dark border-bottom border-warning">
        <div class="container text-center">
            <h1 class="display-4 fw-bold text-warning mb-4">🗺️ Карта-руководство VeriRandom</h1>
            <p class="lead text-white mb-4">Визуальный гид по использованию системы. Выберите свой путь!</p>
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="alert alert-warning">
                        <strong>🎯 Не знаете с чего начать?</strong> Следуйте по шагам ниже - каждый приведет вас к нужному результату!
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Интерактивный помощник -->
    <div class="container py-4">
        <div class="interactive-helper">
            <h3 class="text-warning text-center mb-4">🚀 Интерактивный помощник</h3>
            <p class="text-center text-white mb-4">Ответьте на несколько вопросов, и мы подберем идеальный путь для вас!</p>
            
            <div class="progress-tracker" id="progressTracker">
                <div class="progress-step completed" data-step="1">1</div>
                <div class="progress-step" data-step="2">2</div>
                <div class="progress-step" data-step="3">3</div>
                <div class="progress-step" data-step="4">4</div>
            </div>
            
            <div class="helper-step active" id="step1">
                <h5 class="text-warning mb-3">Что вы хотите сделать?</h5>
                <div class="row equal-height">
                    <div class="col-md-4">
                        <div class="option-card" data-value="generate">
                            <div class="text-center flex-grow-1">
                                <div class="fs-1 mb-2">🎲</div>
                                <h6>Сгенерировать случайные числа</h6>
                                <small class="text-white">Для лотереи, розыгрыша или конкурса</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="option-card" data-value="audit">
                            <div class="text-center flex-grow-1">
                                <div class="fs-1 mb-2">🔍</div>
                                <h6>Проверить существующие данные</h6>
                                <small class="text-white">Убедиться, что числа действительно случайны</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="option-card" data-value="learn">
                            <div class="text-center flex-grow-1">
                                <div class="fs-1 mb-2">🎓</div>
                                <h6>Познакомиться с системой</h6>
                                <small class="text-white">Изучить возможности перед использованием</small>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="text-center mt-4">
                    <button class="btn btn-warning" onclick="nextStep(2)" disabled id="step1Btn">Далее →</button>
                </div>
            </div>
            
            <div class="helper-step" id="step2">
                <h5 class="text-warning mb-3">Какой тип данных вас интересует?</h5>
                <div class="row equal-height">
                    <div class="col-md-6">
                        <div class="option-card" data-value="numbers">
                            <div class="text-center flex-grow-1">
                                <div class="fs-1 mb-2">🔢</div>
                                <h6>Числовые данные</h6>
                                <small class="text-white">Лотерейные билеты, случайные числа</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="option-card" data-value="sequence">
                            <div class="text-center flex-grow-1">
                                <div class="fs-1 mb-2">📊</div>
                                <h6>Последовательности</h6>
                                <small class="text-white">Наборы данных для анализа</small>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="text-center mt-4">
                    <button class="btn btn-outline-warning me-2" onclick="prevStep(1)">← Назад</button>
                    <button class="btn btn-warning" onclick="nextStep(3)" disabled id="step2Btn">Далее →</button>
                </div>
            </div>
            
            <div class="helper-step" id="step3">
                <h5 class="text-warning mb-3">Какой уровень детализации вам нужен?</h5>
                <div class="row equal-height">
                    <div class="col-md-4">
                        <div class="option-card" data-value="basic">
                            <div class="text-center flex-grow-1">
                                <div class="fs-1 mb-2">⚡</div>
                                <h6>Быстрый результат</h6>
                                <small class="text-white">Минимум деталей, только основные данные</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="option-card" data-value="standard">
                            <div class="text-center flex-grow-1">
                                <div class="fs-1 mb-2">📄</div>
                                <h6>Стандартный отчет</h6>
                                <small class="text-white">Баланс между скоростью и детализацией</small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="option-card" data-value="detailed">
                            <div class="text-center flex-grow-1">
                                <div class="fs-1 mb-2">🔬</div>
                                <h6>Детальный анализ</h6>
                                <small class="text-white">Полная информация со всеми тестами</small>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="text-center mt-4">
                    <button class="btn btn-outline-warning me-2" onclick="prevStep(2)">← Назад</button>
                    <button class="btn btn-warning" onclick="nextStep(4)" disabled id="step3Btn">Далее →</button>
                </div>
            </div>
            
            <div class="helper-step" id="step4">
                <h5 class="text-warning mb-3">Ваш персональный путь готов!</h5>
                <div class="result-visualization active" id="personalPath">
                    <!-- Содержимое будет сгенерировано динамически -->
                </div>
                <div class="text-center mt-4">
                    <button class="btn btn-outline-warning me-2" onclick="prevStep(3)">← Назад</button>
                    <button class="btn btn-warning" onclick="startJourney()">Начать работу!</button>
                </div>
            </div>
        </div>
    </div>

    <!-- User Scenarios -->
    <div class="container py-4">
        <div class="user-scenario">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h4 class="text-warning mb-3">👋 "Я новичок и не знаю, что делать!"</h4>
                    <p class="text-white mb-0">Не переживайте! Просто начните с <strong>Шага 1</strong> ниже. Мы проведем вас за руку через весь процесс.</p>
                </div>
                <div class="col-md-4 text-center">
                    <div class="scenario-avatar mx-auto bounce">🎓</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Journey Map -->
    <div class="container py-5">
        <div class="journey-map">
            <!-- Линия пути -->
            <div class="path-line"></div>

            <!-- Шаг 1: Определение цели -->
            <div class="journey-step fade-in">
                <div class="step-number pulse" onclick="toggleStep(1)">1</div>
                <div class="step-card">
                    <div class="step-content-wrapper">
                        <div class="step-main-content">
                            <div class="row step-row align-items-stretch">
                                <div class="col-md-2 text-center">
                                    <div class="step-icon">🎯</div>
                                </div>
                                <div class="col-md-8 step-center-content">
                                    <h4 class="text-warning mb-3">Определите вашу цель</h4>
                                    <p class="text-white mb-3">Что вы хотите сделать? Выберите подходящий вариант:</p>
                                    
                                    <div class="quick-action" onclick="event.stopPropagation(); selectAction(1)">
                                        <div class="d-flex align-items-center">
                                            <div class="me-3">🎲</div>
                                            <div>
                                                <strong>Провести розыгрыш</strong>
                                                <small class="d-block text-white">Нужно сгенерировать случайные числа для лотереи, конкурса или розыгрыша</small>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="quick-action" onclick="event.stopPropagation(); selectAction(2)">
                                        <div class="d-flex align-items-center">
                                            <div class="me-3">🔍</div>
                                            <div>
                                                <strong>Проверить существующие данные</strong>
                                                <small class="d-block text-white">Уже есть числа и нужно убедиться, что они действительно случайны</small>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="quick-action" onclick="event.stopPropagation(); selectAction(3)">
                                        <div class="d-flex align-items-center">
                                            <div class="me-3">🎓</div>
                                            <div>
                                                <strong>Познакомиться с системой</strong>
                                                <small class="d-block text-white">Хочу изучить возможности перед реальным использованием</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-2 step-button-column">
                                    <button class="btn btn-outline-warning" onclick="event.stopPropagation(); showStepDetails(0)">Подробнее</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Шаг 2: Выбор инструмента -->
            <div class="journey-step fade-in">
                <div class="step-number" onclick="toggleStep(2)">2</div>
                <div class="step-card">
                    <div class="step-content-wrapper">
                        <div class="step-main-content">
                            <div class="row step-row align-items-stretch">
                                <div class="col-md-2 text-center">
                                    <div class="step-icon">🛠️</div>
                                </div>
                                <div class="col-md-8 step-center-content">
                                    <h4 class="text-warning mb-3">Выберите нужный инструмент</h4>
                                    <p class="text-white">На основе вашей цели перейдите в соответствующий раздел:</p>
                                    
                                    <div class="row mt-3">
                                        <div class="col-md-4">
                                            <a href="/lottery" class="btn btn-warning w-100 mb-2">
                                                🎲 Проведение тиража
                                            </a>
                                            <small class="text-white d-block">Для генерации новых случайных чисел</small>
                                        </div>
                                        <div class="col-md-4">
                                            <a href="/audit" class="btn btn-outline-warning w-100 mb-2">
                                                🔍 Аудит генератора
                                            </a>
                                            <small class="text-white d-block">Для проверки существующих данных</small>
                                        </div>
                                        <div class="col-md-4">
                                            <a href="/demo" class="btn btn-outline-warning w-100 mb-2">
                                                🎓 Демонстрация
                                            </a>
                                            <small class="text-white d-block">Для обучения и знакомства</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-2 step-button-column">
                                    <button class="btn btn-outline-warning" onclick="event.stopPropagation(); showStepDetails(4)">Подробнее</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Шаг 3: Работа в выбранном разделе -->
            <div class="journey-step fade-in">
                <div class="step-number" onclick="toggleStep(3)">3</div>
                <div class="step-card">
                    <div class="step-content-wrapper">
                        <div class="step-main-content">
                            <div class="row step-row align-items-stretch">
                                <div class="col-md-2 text-center">
                                    <div class="step-icon">⚡</div>
                                </div>
                                <div class="col-md-8 step-center-content">
                                    <h4 class="text-warning mb-3">Работайте в выбранном разделе</h4>
                                    
                                    <div class="visual-guide">
                                        <div class="text-warning fs-1">🎲</div>
                                        <div>
                                            <h6 class="text-warning">Если вы в "Проведении тиража":</h6>
                                            <ol class="text-white">
                                                <li>Нажмите "Запустить тираж"</li>
                                                <li>Наблюдайте за сбором энтропии</li>
                                                <li>Получите готовые случайные числа</li>
                                                <li>Сохраните цифровой слепок</li>
                                            </ol>
                                        </div>
                                    </div>

                                    <div class="visual-guide">
                                        <div class="text-warning fs-1">🔍</div>
                                        <div>
                                            <h6 class="text-warning">Если вы в "Аудите генератора":</h6>
                                            <ol class="text-white">
                                                <li>Загрузите файл с данными</li>
                                                <li>Выберите нужные тесты</li>
                                                <li>Запустите анализ</li>
                                                <li>Изучите результаты проверки</li>
                                            </ol>
                                        </div>
                                    </div>

                                    <div class="visual-guide">
                                        <div class="text-warning fs-1">🎓</div>
                                        <div>
                                            <h6 class="text-warning">Если вы в "Демонстрации":</h6>
                                            <ol class="text-white">
                                                <li>Выберите пример последовательности</li>
                                                <li>Запустите анализ</li>
                                                <li>Наблюдайте за процессом</li>
                                                <li>Изучите обучающие материалы</li>
                                            </ol>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-2 step-button-column">
                                    <button class="btn btn-outline-warning" onclick="event.stopPropagation(); showStepDetails(5)">Подробнее</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Шаг 4: Получение результата -->
            <div class="journey-step fade-in">
                <div class="step-number" onclick="toggleStep(4)">4</div>
                <div class="step-card">
                    <div class="step-content-wrapper">
                        <div class="step-main-content">
                            <div class="row step-row align-items-stretch">
                                <div class="col-md-2 text-center">
                                    <div class="step-icon">🏆</div>
                                </div>
                                <div class="col-md-8 step-center-content">
                                    <h4 class="text-warning mb-3">Получите и используйте результат</h4>
                                    <p class="text-white">В зависимости от выбранного раздела вы получите:</p>
                                    
                                    <div class="row text-center mt-4 equal-height">
                                        <div class="col-md-4">
                                            <div class="result-card">
                                                <div class="text-warning fs-1">📄</div>
                                                <h6 class="text-warning mt-2">Готовые числа</h6>
                                                <small class="text-white">Для розыгрышей и лотерей</small>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="result-card">
                                                <div class="text-warning fs-1">📊</div>
                                                <h6 class="text-warning mt-2">Детальный отчет</h6>
                                                <small class="text-white">С графиками и выводами</small>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="result-card">
                                                <div class="text-warning fs-1">🔒</div>
                                                <h6 class="text-warning mt-2">Цифровой слепок</h6>
                                                <small class="text-white">Для верификации результатов</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-2 step-button-column">
                                    <button class="btn btn-outline-warning" onclick="event.stopPropagation(); showStepDetails(6)">Подробнее</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Decision Helper -->
    <div class="container py-5">
        <div class="card bg-dark border-warning">
            <div class="card-header bg-warning text-dark text-center">
                <h4 class="mb-0">🎯 Все еще сомневаетесь? Ответьте на 2 вопроса!</h4>
            </div>
            <div class="card-body">
                <div class="row justify-content-center">
                    <div class="col-lg-8">
                        <div id="decisionHelper">
                            <div class="text-center mb-4">
                                <h5 class="text-warning">У вас уже есть данные для проверки?</h5>
                                <div class="d-flex gap-3 justify-content-center mt-3">
                                    <button class="btn btn-warning" onclick="showDecisionResult('audit')">
                                        ✅ Да, есть файл с числами
                                    </button>
                                    <button class="btn btn-outline-warning" onclick="showDecisionResult('lottery')">
                                        ❌ Нет, нужно сгенерировать
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div id="decisionResult" style="display: none;">
                            <div class="text-center p-4 border border-warning rounded mt-4">
                                <h4 class="text-warning" id="resultTitle"></h4>
                                <p class="text-white" id="resultDescription"></p>
                                <a href="#" class="btn btn-warning mt-3" id="resultLink">Перейти в раздел</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Интерактивная подсказка -->
    <div class="floating-tooltip" id="floatingTooltip">
        <span class="tooltip-close" onclick="closeTooltip()">×</span>
        <h6 class="mb-2">💡 Подсказка</h6>
        <p id="tooltipText">Нажмите на любой шаг, чтобы увидеть подробности!</p>
    </div>

    <!-- Оверлей и бейдж завершения -->
    <div class="overlay" id="completionOverlay"></div>
    <div class="completion-badge" id="completionBadge">
        <div class="fs-1 mb-3">🎉</div>
        <h4 class="mb-3">Путь пройден!</h4>
        <p>Теперь вы знаете, как использовать VeriRandom</p>
        <button class="btn btn-dark mt-3" onclick="closeCompletionBadge()">Понятно</button>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-warning mt-5">
        <div class="footer-waves">
            <div class="wave"></div>
            <div class="wave"></div>
        </div>
        
        <div class="container py-5">
            <div class="row">
                <div class="col-lg-4 mb-4">
                    <h4 class="text-warning mb-4">
                        VeriRandom
                    </h4>
                    <p class="text-white lead">
                        Профессиональная система для работы со случайностью. 
                        Генерация, анализ и верификация случайных последовательностей.
                    </p>
                </div>
                
                <div class="col-lg-2 col-md-6 mb-4">
                    <h5 class="text-warning mb-3">Навигация</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="/" class="text-white text-decoration-none footer-link">Главная</a></li>
                        <li class="mb-2"><a href="/lottery" class="text-white text-decoration-none footer-link">Тиражи</a></li>
                        <li class="mb-2"><a href="/audit" class="text-white text-decoration-none footer-link">Аудит</a></li>
                        <li class="mb-2"><a href="/demo" class="text-white text-decoration-none footer-link">Демо</a></li>
                    </ul>
                </div>
                
                <div class="col-lg-3 col-md-6 mb-4">
                    <h5 class="text-warning mb-3">Ресурсы</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="/guide" class="text-white text-decoration-none footer-link">Руководство</a></li>
                        <li class="mb-2"><a href="#" class="text-white text-decoration-none footer-link">Документация</a></li>
                        <li class="mb-2"><a href="#" class="text-white text-decoration-none footer-link">API</a></li>
                        <li class="mb-2"><a href="#" class="text-white text-decoration-none footer-link">Поддержка</a></li>
                    </ul>
                </div>
                
                <div class="col-lg-3 mb-4">
                    <h5 class="text-warning mb-3">Контакты</h5>
                    <div class="d-flex flex-column gap-2">
                        <div class="d-flex align-items-center">
                            <span class="text-white">support@verirandom.com</span>
                        </div>
                        <div class="d-flex align-items-center">
                            <span class="text-white">+7 (999) 123-45-67</span>
                        </div>
                        <div class="d-flex gap-3 mt-2">
                            <a href="#" class="text-warning social-icon"><i class="bi bi-github fs-4"></i></a>
                            <a href="#" class="text-warning social-icon"><i class="bi bi-telegram fs-4"></i></a>
                            <a href="#" class="text-warning social-icon"><i class="bi bi-linkedin fs-4"></i></a>
                        </div>
                    </div>
                </div>
            </div>
            
            <hr class="border-warning my-4">
            
            <div class="row align-items-center">
                <div class="col-md-6">
                    <p class="text-white mb-0">&copy; 2024 VeriRandom. Все права защищены.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <div class="d-flex gap-4 justify-content-md-end justify-content-start">
                        <a href="#" class="text-white text-decoration-none footer-link">Политика конфиденциальности</a>
                        <a href="#" class="text-white text-decoration-none footer-link">Условия использования</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Данные пользовательского выбора
        let userChoices = {
            goal: null,
            dataType: null,
            detailLevel: null
        };

        // Анимация появления элементов при скролле
        document.addEventListener('DOMContentLoaded', function() {
            const fadeElements = document.querySelectorAll('.fade-in');
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, { threshold: 0.1 });
            
            fadeElements.forEach(el => observer.observe(el));

            // Показать подсказку через 3 секунды
            setTimeout(showTooltip, 3000);

            // Инициализация выравнивания высоты карточек
            initializeEqualHeight();
        });

        // Инициализация выравнивания высоты
        function initializeEqualHeight() {
            // Для интерактивного помощника
            const helperCards = document.querySelectorAll('.option-card');
            let maxHeight = 0;
            
            helperCards.forEach(card => {
                card.style.height = 'auto';
                const height = card.offsetHeight;
                if (height > maxHeight) maxHeight = height;
            });
            
            helperCards.forEach(card => {
                card.style.height = maxHeight + 'px';
            });

            // Для карточек результатов
            const resultCards = document.querySelectorAll('.result-card');
            maxHeight = 0;
            
            resultCards.forEach(card => {
                card.style.height = 'auto';
                const height = card.offsetHeight;
                if (height > maxHeight) maxHeight = height;
            });
            
            resultCards.forEach(card => {
                card.style.height = maxHeight + 'px';
            });
        }

        // Интерактивный помощник
        function setupOptionCards() {
            const optionCards = document.querySelectorAll('.option-card');
            optionCards.forEach(card => {
                card.addEventListener('click', function() {
                    // Снять выделение с других карточек в том же шаге
                    const parent = this.closest('.helper-step');
                    const siblings = parent.querySelectorAll('.option-card');
                    siblings.forEach(sibling => {
                        sibling.classList.remove('selected');
                    });
                    
                    // Выделить текущую карточку
                    this.classList.add('selected');
                    
                    // Сохранить выбор пользователя
                    const step = parent.id.replace('step', '');
                    const value = this.getAttribute('data-value');
                    
                    if (step === '1') {
                        userChoices.goal = value;
                        document.getElementById('step1Btn').disabled = false;
                    } else if (step === '2') {
                        userChoices.dataType = value;
                        document.getElementById('step2Btn').disabled = false;
                    } else if (step === '3') {
                        userChoices.detailLevel = value;
                        document.getElementById('step3Btn').disabled = false;
                    }
                });
            });
        }

        // Инициализация помощника
        setupOptionCards();

        // Навигация по шагам помощника
        function nextStep(step) {
            // Скрыть все шаги
            document.querySelectorAll('.helper-step').forEach(step => {
                step.classList.remove('active');
            });
            
            // Показать нужный шаг
            document.getElementById(`step${step}`).classList.add('active');
            
            // Обновить трекер прогресса
            updateProgressTracker(step);
            
            // Если это последний шаг, сгенерировать результат
            if (step === 4) {
                generatePersonalPath();
            }

            // Переинициализировать выравнивание высоты
            setTimeout(initializeEqualHeight, 100);
        }

        function prevStep(step) {
            // Скрыть все шаги
            document.querySelectorAll('.helper-step').forEach(step => {
                step.classList.remove('active');
            });
            
            // Показать нужный шаг
            document.getElementById(`step${step}`).classList.add('active');
            
            // Обновить трекер прогресса
            updateProgressTracker(step);

            // Переинициализировать выравнивание высоты
            setTimeout(initializeEqualHeight, 100);
        }

        function updateProgressTracker(currentStep) {
            const progressSteps = document.querySelectorAll('.progress-step');
            const progressBar = document.querySelector('.progress-tracker');
            
            // Обновить шаги
            progressSteps.forEach(step => {
                const stepNum = parseInt(step.getAttribute('data-step'));
                step.classList.remove('active', 'completed');
                
                if (stepNum < currentStep) {
                    step.classList.add('completed');
                } else if (stepNum === currentStep) {
                    step.classList.add('active');
                }
            });
            
            // Обновить полосу прогресса
            const progressPercent = ((currentStep - 1) / 3) * 100;
            progressBar.style.setProperty('--progress-width', `${progressPercent}%`);
        }

        // Генерация персонального пути
        function generatePersonalPath() {
            const pathContainer = document.getElementById('personalPath');
            let pathHTML = '';
            
            // Определить рекомендуемый раздел
            let recommendedSection = '/demo';
            let sectionName = 'Демонстрация';
            let sectionIcon = '🎓';
            
            if (userChoices.goal === 'generate') {
                recommendedSection = '/lottery';
                sectionName = 'Проведение тиража';
                sectionIcon = '🎲';
            } else if (userChoices.goal === 'audit') {
                recommendedSection = '/audit';
                sectionName = 'Аудит генератора';
                sectionIcon = '🔍';
            }
            
            // Определить тип данных
            let dataTypeText = '';
            if (userChoices.dataType === 'numbers') {
                dataTypeText = 'числовые данные';
            } else if (userChoices.dataType === 'sequence') {
                dataTypeText = 'последовательности';
            }
            
            // Определить уровень детализации
            let detailText = '';
            if (userChoices.detailLevel === 'basic') {
                detailText = 'быстрый результат';
            } else if (userChoices.detailLevel === 'standard') {
                detailText = 'стандартный отчет';
            } else if (userChoices.detailLevel === 'detailed') {
                detailText = 'детальный анализ';
            }
            
            pathHTML = `
                <div class="text-center">
                    <div class="path-visual">
                        <div class="path-node active">1</div>
                        <div class="path-arrow">→</div>
                        <div class="path-node active">2</div>
                        <div class="path-arrow">→</div>
                        <div class="path-node active">3</div>
                        <div class="path-arrow">→</div>
                        <div class="path-node active">4</div>
                    </div>
                    
                    <h4 class="text-warning mb-3">Ваш путь: ${sectionName}</h4>
                    <p class="text-white mb-4">На основе ваших ответов мы рекомендуем начать с раздела <strong>${sectionName}</strong>.</p>
                    
                    <div class="row text-center equal-height">
                        <div class="col-md-4">
                            <div class="result-card">
                                <div class="text-warning fs-1">${sectionIcon}</div>
                                <h6 class="text-warning mt-2">${sectionName}</h6>
                                <small class="text-white">Рекомендуемый раздел</small>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="result-card">
                                <div class="text-warning fs-1">📊</div>
                                <h6 class="text-warning mt-2">${dataTypeText}</h6>
                                <small class="text-white">Тип данных</small>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="result-card">
                                <div class="text-warning fs-1">🔍</div>
                                <h6 class="text-warning mt-2">${detailText}</h6>
                                <small class="text-white">Уровень детализации</small>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            pathContainer.innerHTML = pathHTML;
            
            // Переинициализировать выравнивание высоты для новых карточек
            setTimeout(initializeEqualHeight, 100);
        }

        // Начать работу по рекомендованному пути
        function startJourney() {
            let targetPage = '/demo';
            
            if (userChoices.goal === 'generate') {
                targetPage = '/lottery';
            } else if (userChoices.goal === 'audit') {
                targetPage = '/audit';
            }
            
            // Показать бейдж завершения
            document.getElementById('completionOverlay').classList.add('show');
            document.getElementById('completionBadge').classList.add('show');
            
            // Перенаправить через 3 секунды
            setTimeout(() => {
                window.location.href = targetPage;
            }, 3000);
        }

        // Закрыть бейдж завершения
        function closeCompletionBadge() {
            document.getElementById('completionOverlay').classList.remove('show');
            document.getElementById('completionBadge').classList.remove('show');
        }

        // Взаимодействие с картой-путем
        function toggleStep(stepNumber) {
            // Снять выделение со всех шагов
            document.querySelectorAll('.step-number').forEach(step => {
                step.classList.remove('active');
            });
            document.querySelectorAll('.step-card').forEach(card => {
                card.classList.remove('active');
            });
            
            // Выделить выбранный шаг
            const stepElements = document.querySelectorAll(`.journey-step:nth-child(${stepNumber + 1})`);
            stepElements.forEach(step => {
                step.querySelector('.step-number').classList.add('active');
                step.querySelector('.step-card').classList.add('active');
            });
        }

        function selectAction(actionNumber) {
            // Снять выделение со всех действий
            document.querySelectorAll('.quick-action').forEach(action => {
                action.classList.remove('selected');
            });
            
            // Выделить выбранное действие
            const actions = document.querySelectorAll(`.quick-action:nth-child(${actionNumber})`);
            actions.forEach(action => {
                action.classList.add('selected');
            });
            
            // Показать подсказку
            showTooltipWithText(`Отличный выбор! Теперь перейдите к <strong>Шагу 2</strong>, чтобы выбрать инструмент.`);
        }

        // Плавающая подсказка
        function showTooltip() {
            const tooltip = document.getElementById('floatingTooltip');
            tooltip.style.display = 'block';
            
            // Скрыть подсказку через 10 секунд
            setTimeout(() => {
                if (tooltip.style.display === 'block') {
                    tooltip.style.display = 'none';
                }
            }, 10000);
        }

        function showTooltipWithText(text) {
            const tooltip = document.getElementById('floatingTooltip');
            const tooltipText = document.getElementById('tooltipText');
            
            tooltipText.innerHTML = text;
            tooltip.style.display = 'block';
            
            // Скрыть подсказку через 10 секунд
            setTimeout(() => {
                if (tooltip.style.display === 'block') {
                    tooltip.style.display = 'none';
                }
            }, 10000);
        }

        function closeTooltip() {
            document.getElementById('floatingTooltip').style.display = 'none';
        }

        // Помощник принятия решений
        function showDecisionResult(choice) {
            const resultDiv = document.getElementById('decisionResult');
            const title = document.getElementById('resultTitle');
            const description = document.getElementById('resultDescription');
            const link = document.getElementById('resultLink');
            
            if (choice === 'audit') {
                title.textContent = '🔍 Вам нужен "Аудит генератора"';
                description.textContent = 'Перейдите в этот раздел, чтобы загрузить и проверить ваши существующие данные на случайность.';
                link.href = '/audit';
                link.textContent = 'Перейти в Аудит генератора';
            } else {
                title.textContent = '🎲 Вам нужно "Проведение тиража"';
                description.textContent = 'Перейдите в этот раздел, чтобы сгенерировать новые случайные числа для ваших целей.';
                link.href = '/lottery';
                link.textContent = 'Перейти в Проведение тиража';
            }
            
            resultDiv.style.display = 'block';
            resultDiv.scrollIntoView({ behavior: 'smooth' });
        }

        // Показать детали шага
        function showStepDetails(step) {
            const messages = [
                "Определите, что именно вам нужно сделать с системой. Это поможет выбрать правильный путь.",
                "Вы хотите создать новые случайные числа? Идеально для лотерей, розыгрышей и конкурсов!",
                "У вас уже есть данные и нужно их проверить? Отлично для аудита и исследований!",
                "Хотите сначала изучить систему? Начните с демонстрации для безопасного обучения!",
                "Каждый раздел специализируется на своей задаче. Выберите тот, что соответствует вашей цели.",
                "В каждом разделе есть пошаговые инструкции. Система проведет вас через весь процесс.",
                "Результаты включают числа, отчеты и цифровые слепки для полной документации."
            ];
            
            // Показать сообщение во всплывающей подсказке
            showTooltipWithText(messages[step]);
        }

        // Инициализация CSS переменной для прогресс-бара
        document.documentElement.style.setProperty('--progress-width', '0%');

        // Реинициализация при изменении размера окна
        window.addEventListener('resize', initializeEqualHeight);
    </script>
</body>
</html>